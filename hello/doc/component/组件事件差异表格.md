<think>
用户要求我添加不同组件的事件说明，比如view、image、button等。我需要整理出各个常见组件在不同平台（HTML5、Vue、UniApp、小程序）支持的事件，并说明它们的差异。

我需要考虑：
1. 基础组件：view、text、image
2. 表单组件：input、textarea、button、form、picker、slider等
3. 媒体组件：video、audio
4. 导航组件：navigator
5. 画布组件：canvas
6. 其他特殊组件

每个组件都要说明其在不同平台支持的事件，以及使用注意事项。

</think># H5、Vue、UniApp、小程序组件事件详细对照表

## 一、基础组件事件支持
### 前置
- 在Uniapp小程序中，同时存在 tap 和 click，那么只会触发tap。
- 在Uniapp H5中，同时存在 tap 和 click，那么先触发click，再触发tap。

### 1. View/Div 容器组件

| 事件 | HTML5 (div) | Vue (div) | UniApp H5 (view) | UniApp 小程序 (view) | 原生小程序 (view) | 说明 |
|------|-------------|-----------|------------------|---------------------|-------------------|------|
| click | ✅ | ✅ | ✅ | ✅ | ❌ | 使用tap代替 |
| tap | ❌ | ❌ | ✅ | ✅ | ✅ | 点击事件 |
| dblclick | ✅ | ✅ | ✅ | ❌ | ❌ | 小程序不支持双击事件 |
| longpress | ❌ | ❌ | ✅ | ✅ | ✅ | 长按事件 |
| touchstart | ✅ | ✅ | ✅ | ✅ | ✅ | 触摸开始 |
| touchmove | ✅ | ✅ | ✅ | ✅ | ✅ | 触摸移动 |
| touchend | ✅ | ✅ | ✅ | ✅ | ✅ | 触摸结束 |
| touchcancel | ✅ | ✅ | ✅ | ✅ | ✅ | 触摸取消 |
| transitionend | ✅ | ✅ | ✅ | ✅ | ✅ | 过渡结束 |
| animationstart | ✅ | ✅ | ✅ | ✅ | ✅ | 动画开始 |
| animationend | ✅ | ✅ | ✅ | ✅ | ✅ | 动画结束 |

**使用示例：**
```vue
<!-- UniApp/小程序 -->
<view @tap="handleTap" @longpress="handleLongpress">
  点击或长按我
</view>

<!-- HTML5/Vue -->
<div @click="handleClick" @touchstart="handleTouchStart">
  点击我
</div>
```

### 2. Text/Span 文本组件

| 事件 | HTML5 (span) | Vue (span) | UniApp H5 (text) | UniApp 小程序 (text) | 原生小程序 (text) | 说明 |
|------|-------------|-----------|------------------|---------------------|-------------------|------|
| click | ✅ | ✅ | ✅ | ❌ | ❌ | |
| tap | ❌ | ❌ | ✅ | ✅ | ✅ | |
| copy | ❌ | ❌ | ❌ | ❌ | ❌ | 需设置selectable |
| selectstart | ✅ | ✅ | ❌ | ❌ | ❌ | 文本选择开始 |
| selectend | ✅ | ✅ | ❌ | ❌ | ❌ | 文本选择结束 |

**特殊属性：**
```vue
<!-- 小程序可复制文本 -->
<text selectable="true" @tap="handleTap">可选择复制的文本</text>

<!-- HTML5/Vue -->
<span @selectstart="handleSelect">可选择的文本</span>
```

### 3. Image 图片组件

| 事件 | HTML5 (img) | Vue (img) | UniApp H5 (image) | UniApp 小程序 (image) | 原生小程序 (image) | 说明 |
|------|-------------|-----------|------------------|---------------------|-------------------|------|
| click | ✅ | ✅ | ✅ | ❌ | ❌ | |
| tap | ❌ | ❌ | ✅ | ✅ | ✅ | |
| load | ✅ | ✅ | ✅ | ✅ | ✅ | 图片加载完成 |
| error | ✅ | ✅ | ✅ | ✅ | ✅ | 图片加载失败 |
| dragstart | ✅ | ✅ | ✅ | ❌ | ❌ | 拖拽开始 |
| dragend | ✅ | ✅ | ✅ | ❌ | ❌ | 拖拽结束 |

**使用示例：**
```vue
<!-- UniApp/小程序 -->
<image 
  src="/static/logo.png" 
  @load="imageLoaded"
  @error="imageError"
  @tap="previewImage"
  mode="aspectFill"
/>

<!-- HTML5/Vue -->
<img 
  :src="imageUrl" 
  @load="imageLoaded"
  @error="imageError"
  @click="previewImage"
/>
```

## 二、表单组件事件支持

### 4. Button 按钮组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| click | ✅ | ✅ | ✅ | ❌ | ❌ | |
| tap | ❌ | ❌ | ✅ | ✅ | ✅ | |
| dblclick | ✅ | ✅ | ✅ | ❌ | ❌ | 小程序不支持双击事件 |
| submit | ✅ | ✅ | ✅ | ✅ | ✅ | form-type="submit"时触发 |
| reset | ✅ | ✅ | ✅ | ✅ | ✅ | form-type="reset"时触发 |
| getuserinfo | ❌ | ❌ | ❌ | ✅ | ✅ | 获取用户信息(已废弃) |
| getphonenumber | ❌ | ❌ | ❌ | ✅ | ✅ | 获取手机号 |
| opensetting | ❌ | ❌ | ❌ | ✅ | ✅ | 打开设置页 |
| launchapp | ❌ | ❌ | ❌ | ✅ | ✅ | 打开APP |
| contact | ❌ | ❌ | ❌ | ✅ | ✅ | 打开客服会话 |
| chooseavatar | ❌ | ❌ | ❌ | ✅ | ✅ | 获取用户头像 |

**使用示例：**
```vue
<!-- UniApp 小程序端 -->
<button 
  type="primary"
  @tap="handleTap"
  @getphonenumber="getPhoneNumber"
  open-type="getPhoneNumber"
>
  获取手机号
</button>

<!-- HTML5/Vue -->
<button 
  type="button"
  @click="handleClick"
  :disabled="loading"
>
  提交
</button>
```

### 5. Input 输入框组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| input | ✅ | ✅ | ✅ | ✅ | ✅ | 输入时触发 |
| change | ✅ | ✅ | ✅ | ✅ | ✅ | 失焦时值改变触发 |
| focus | ✅ | ✅ | ✅ | ✅ | ✅ | 获得焦点 |
| blur | ✅ | ✅ | ✅ | ✅ | ✅ | 失去焦点 |
| confirm | ❌ | ❌ | ✅ | ✅ | ✅ | 点击键盘确认 |
| keyboardheightchange | ❌ | ❌ | ❌ | ✅ | ✅ | 键盘高度变化 |
| search | ✅ | ✅ | ✅ | ❌ | ❌ | type="search"时 |

**使用示例：**
```vue
<!-- UniApp/小程序 -->
<input 
  v-model="inputValue"
  type="text"
  placeholder="请输入"
  @input="onInput"
  @focus="onFocus"
  @blur="onBlur"
  @confirm="onConfirm"
  @keyboardheightchange="onKeyboardChange"
/>

<!-- HTML5/Vue -->
<input 
  v-model="inputValue"
  type="text"
  placeholder="请输入"
  @input="onInput"
  @focus="onFocus"
  @blur="onBlur"
  @keyup.enter="onEnter"
/>
```

### 6. Textarea 多行文本框组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| input | ✅ | ✅ | ✅ | ✅ | ✅ | |
| focus | ✅ | ✅ | ✅ | ✅ | ✅ | |
| blur | ✅ | ✅ | ✅ | ✅ | ✅ | |
| confirm | ❌ | ❌ | ✅ | ✅ | ✅ | 点击完成按钮 |
| linechange | ❌ | ❌ | ❌ | ✅ | ✅ | 行数变化 |
| keyboardheightchange | ❌ | ❌ | ❌ | ✅ | ✅ | 键盘高度变化 |

### 7. Form 表单组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| submit | ✅ | ✅ | ✅ | ✅ | ✅ | 表单提交 |
| reset | ✅ | ✅ | ✅ | ✅ | ✅ | 表单重置 |

**使用示例：**
```vue
<!-- UniApp/小程序 -->
<form @submit="formSubmit" @reset="formReset">
  <input name="username" />
  <button form-type="submit">提交</button>
  <button form-type="reset">重置</button>
</form>
```

### 8. Switch 开关组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| change | ✅ | ✅ | ✅ | ✅ | ✅ | 值改变时触发 |
| click | ✅ | ✅ | ✅ | ❌ | ❌ | |
| tap | ❌ | ❌ | ✅ | ✅ | ✅ | |

### 9. Picker 选择器组件

| 事件 | HTML5 (select) | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|----------------|-----|-----------|---------------|------------|------|
| change | ✅ | ✅ | ✅ | ✅ | ✅ | 值改变 |
| cancel | ❌ | ❌ | ✅ | ✅ | ✅ | 取消选择 |
| columnchange | ❌ | ❌ | ❌ | ✅ | ✅ | 列改变(多列选择器) |

## 三、媒体组件事件支持

### 10. Video 视频组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| play | ✅ | ✅ | ✅ | ✅ | ✅ | 开始播放 |
| pause | ✅ | ✅ | ✅ | ✅ | ✅ | 暂停播放 |
| ended | ✅ | ✅ | ✅ | ✅ | ✅ | 播放结束 |
| timeupdate | ✅ | ✅ | ✅ | ✅ | ✅ | 播放进度更新 |
| fullscreenchange | ✅ | ✅ | ✅ | ✅ | ✅ | 全屏变化 |
| error | ✅ | ✅ | ✅ | ✅ | ✅ | 视频错误 |
| waiting | ✅ | ✅ | ✅ | ✅ | ✅ | 视频缓冲 |
| progress | ✅ | ✅ | ✅ | ✅ | ✅ | 加载进度 |
| loadedmetadata | ✅ | ✅ | ✅ | ✅ | ✅ | 元数据加载完成 |
| controlstoggle | ❌ | ❌ | ❌ | ✅ | ✅ | 控制栏切换 |

**使用示例：**
```vue
<!-- UniApp/小程序 -->
<video 
  src="video.mp4"
  @play="onPlay"
  @pause="onPause"
  @ended="onEnded"
  @timeupdate="onTimeUpdate"
  @fullscreenchange="onFullscreenChange"
/>
```

### 11. Audio 音频组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| play | ✅ | ✅ | ✅ | ✅ | ✅ | |
| pause | ✅ | ✅ | ✅ | ✅ | ✅ | |
| ended | ✅ | ✅ | ✅ | ✅ | ✅ | |
| timeupdate | ✅ | ✅ | ✅ | ✅ | ✅ | |
| error | ✅ | ✅ | ✅ | ✅ | ✅ | |
| canplay | ✅ | ✅ | ✅ | ✅ | ✅ | 可以播放 |

## 四、滚动和滑动组件事件

### 12. ScrollView 滚动视图组件

| 事件 | HTML5 (div) | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------------|-----|-----------|---------------|------------|------|
| scroll | ✅ | ✅ | ✅ | ✅ | ✅ | 滚动时触发 |
| scrolltoupper | ❌ | ❌ | ✅ | ✅ | ✅ | 滚动到顶部 |
| scrolltolower | ❌ | ❌ | ✅ | ✅ | ✅ | 滚动到底部 |
| refresherpulling | ❌ | ❌ | ❌ | ✅ | ✅ | 下拉中 |
| refresherrefresh | ❌ | ❌ | ❌ | ✅ | ✅ | 下拉刷新 |
| refresherrestore | ❌ | ❌ | ❌ | ✅ | ✅ | 下拉复位 |

**使用示例：**
```vue
<!-- UniApp/小程序 -->
<scroll-view 
  scroll-y
  @scroll="onScroll"
  @scrolltoupper="onScrollToUpper"
  @scrolltolower="onScrollToLower"
  :scroll-top="scrollTop"
>
  <view>滚动内容</view>
</scroll-view>
```

### 13. Swiper 轮播组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| change | ❌ | ❌ | ✅ | ✅ | ✅ | 切换时触发 |
| transition | ❌ | ❌ | ✅ | ✅ | ✅ | 过渡时触发 |
| animationfinish | ❌ | ❌ | ✅ | ✅ | ✅ | 动画结束 |

## 五、Canvas 画布组件

| 事件 | HTML5 | Vue | UniApp H5 | UniApp 小程序 | 原生小程序 | 说明 |
|------|-------|-----|-----------|---------------|------------|------|
| touchstart | ✅ | ✅ | ✅ | ✅ | ✅ | |
| touchmove | ✅ | ✅ | ✅ | ✅ | ✅ | |
| touchend | ✅ | ✅ | ✅ | ✅ | ✅ | |
| longtap | ❌ | ❌ | ✅ | ✅ | ✅ | 长按事件 |
| error | ❌ | ❌ | ✅ | ✅ | ✅ | 渲染错误 |

## 六、特殊组件和平台差异

### 平台特有组件事件

#### 小程序特有组件
```vue
<!-- movable-view 可移动视图 -->
<movable-area>
  <movable-view 
    @change="onChange"
    @scale="onScale"
    @htouchmove="onTouchMove"
    @vtouchmove="onVTouchMove"
  />
</movable-area>

<!-- picker-view 滚动选择器 -->
<picker-view 
  @change="onChange"
  @pickstart="onPickStart"
  @pickend="onPickEnd"
/>

<!-- live-player 直播组件 -->
<live-player
  @statechange="onStateChange"
  @fullscreenchange="onFullscreenChange"
  @netstatus="onNetStatus"
/>
```

### 事件处理最佳实践
#### 事件描述符
- prevent：阻止默认行为
- stop：阻止事件冒泡
- capture：使用事件捕获模式
- self：只有当事件是从事件源本身触发时才触发回调函数
- once：只触发一次回调函数
- passive：提高页面滚动的流畅度
```
.prevent 和 .stop 是两种不同的事件修饰符，虽然它们有一些相似之处，但是在事件处理中有不同的作用。

1 .prevent 用于阻止事件的默认行为，例如阻止 <a> 标签的默认跳转、阻止表单的默认提交等。
如果一个事件被 .prevent 修饰符修饰了，则在事件触发时，不会执行事件的默认行为，而只会执行`绑定的事件处理函数`。

2 .stop 用于阻止事件的冒泡传播，事件冒泡是指当一个元素触发事件时，该事件会向父级元素传播。
如果一个事件被 .stop 修饰符修饰了，则在事件触发时，不会向上层元素传播该事件，而只会在当前元素内部进行处理。

因此，.prevent 和 .stop 的作用是不同的，但是它们都能够阻止事件的默认行为。
.prevent 用于阻止元素的默认行为，.stop 用于阻止事件的冒泡传播。 
```
#### 1. 特殊事件处理
#### 事件冒泡控制
| 平台 | 阻止冒泡方式 | 阻止默认行为 |
|------|-------------|--------------|
| HTML5 | event.stopPropagation() | event.preventDefault() |
| Vue | @click.stop | @click.prevent |
| UniApp H5 | @click.stop | @click.prevent |
| UniApp 小程序 | @tap.stop | 使用catch前缀 |
| 原生小程序 | catchtap | 无法阻止 |

自定义事件
```javascript
// HTML5/Vue
this.$emit('custom-event', data);

// UniApp
this.$emit('custom-event', data);

// 小程序
this.triggerEvent('customEvent', data);
```

#### 2. 统一事件处理函数
```javascript
// utils/event.js
export function normalizeEvent(e) {
  const event = e || window.event;
  return {
    type: event.type,
    target: event.target || event.currentTarget,
    detail: event.detail || {},
    touches: event.touches || [],
    changedTouches: event.changedTouches || [],
    preventDefault() {
      event.preventDefault && event.preventDefault();
    },
    stopPropagation() {
      event.stopPropagation && event.stopPropagation();
    }
  };
}
```

#### 3. 跨平台组件封装
```vue
<!-- components/cross-button.vue -->
<template>
  <!-- #ifdef H5 -->
  <button @click="handleClick" v-bind="$attrs">
    <slot />
  </button>
  <!-- #endif -->
  
  <!-- #ifdef MP -->
  <button @tap="handleClick" v-bind="$attrs">
    <slot />
  </button>
  <!-- #endif -->
</template>

<script>
export default {
  methods: {
    handleClick(e) {
      // 统一处理
      this.$emit('click', e);
      this.$emit('tap', e);
    }
  }
}
</script>
```

#### 4. 事件节流防抖
```javascript
// mixins/eventOptimize.js
export default {
  methods: {
    // 节流
    throttle(fn, delay = 300) {
      let timer = null;
      return function(...args) {
        if (!timer) {
          timer = setTimeout(() => {
            fn.apply(this, args);
            timer = null;
          }, delay);
        }
      };
    },
    
    // 防抖
    debounce(fn, delay = 300) {
      let timer = null;
      return function(...args) {
        clearTimeout(timer);
        timer = setTimeout(() => {
          fn.apply(this, args);
        }, delay);
      };
    }
  }
}
```

### 注意事项总结

1. **点击事件**：H5使用click，小程序使用tap
2. **事件冒泡**：小程序使用catch前缀阻止冒泡，H5使用.stop修饰符
3. **表单事件**：confirm事件仅在小程序中存在
4. **键盘事件**：小程序不支持键盘事件，需要通过input组件的confirm事件替代
5. **特殊权限**：小程序的授权类事件需要配置button的open-type
6. **性能优化**：高频事件（scroll、input）需要节流处理
7. **兼容处理**：使用条件编译或统一封装处理跨平台差异